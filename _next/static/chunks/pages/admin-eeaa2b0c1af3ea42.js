(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{64830:function(s,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return n(66767)}])},66767:function(s,e,n){"use strict";n.r(e),n.d(e,{default:function(){return AdminDashboard}});var i=n(85893),r=n(67294),l=n(21737),c=n(5616),t=n(15861),d=n(86886),x=n(66242),o=n(44267),a=n(9526),h=n(72882),j=n(90629),Z=n(7906),u=n(53184),m=n(53816),f=n(53252),v=n(295),p=n(48571),y=n(31523),b=n(14603),_=n(30603),g=n(43117),S=n(11163),w=n(55826),E=n(46435),k=n(87179);function AdminDashboard(){let s=(0,S.useRouter)(),{user:e}=(0,k.a)(),[n,A]=(0,r.useState)(null),[I,N]=(0,r.useState)(!0),[z,P]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!e){s.push("/");return}if("Admin"!==e.role){P("无权访问管理后台");return}loadStats()},[e,s]);let loadStats=async()=>{try{let s=await E.Sb.getStats();s.success&&s.data?A(s.data):P("加载统计数据失败")}catch(s){console.error("加载统计数据失败:",s),P("加载统计数据失败")}finally{N(!1)}};if(!e||"Admin"!==e.role)return(0,i.jsx)(w.Z,{children:(0,i.jsx)(l.Z,{severity:"error",sx:{mt:2},children:z||"无权访问管理后台"})});let B=[{title:"用户数",value:(null==n?void 0:n.users)||0,icon:(0,i.jsx)(p.Z,{sx:{fontSize:40}}),color:"#1976d2"},{title:"帖子数",value:(null==n?void 0:n.posts)||0,icon:(0,i.jsx)(y.Z,{sx:{fontSize:40}}),color:"#2e7d32"},{title:"评论数",value:(null==n?void 0:n.comments)||0,icon:(0,i.jsx)(b.Z,{sx:{fontSize:40}}),color:"#ed6c02"},{title:"分类数",value:(null==n?void 0:n.categories)||0,icon:(0,i.jsx)(_.Z,{sx:{fontSize:40}}),color:"#9c27b0"}];return(0,i.jsx)(w.Z,{children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(t.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"管理后台"}),z&&(0,i.jsx)(l.Z,{severity:"error",sx:{mb:3},children:z}),(0,i.jsx)(d.ZP,{container:!0,spacing:3,sx:{mb:4},children:B.map((s,e)=>(0,i.jsx)(d.ZP,{item:!0,xs:12,sm:6,md:3,children:(0,i.jsx)(x.Z,{children:(0,i.jsx)(o.Z,{children:(0,i.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(t.Z,{variant:"h4",component:"div",fontWeight:"bold",children:I?(0,i.jsx)(a.Z,{width:60}):s.value}),(0,i.jsx)(t.Z,{variant:"body2",color:"text.secondary",children:s.title})]}),(0,i.jsx)(c.Z,{sx:{color:s.color},children:s.icon})]})})})},e))}),(0,i.jsx)(x.Z,{children:(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(t.Z,{variant:"h6",gutterBottom:!0,children:"系统概览"}),(0,i.jsx)(h.Z,{component:j.Z,variant:"outlined",children:(0,i.jsxs)(Z.Z,{children:[(0,i.jsx)(u.Z,{children:(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(f.Z,{children:"模块"}),(0,i.jsx)(f.Z,{children:"状态"}),(0,i.jsx)(f.Z,{children:"说明"})]})}),(0,i.jsxs)(v.Z,{children:[(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(f.Z,{children:"用户系统"}),(0,i.jsx)(f.Z,{children:(0,i.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",color:"success.main"},children:[(0,i.jsx)(g.Z,{sx:{mr:1}}),"正常运行"]})}),(0,i.jsx)(f.Z,{children:"集成 ByUsi 账号系统"})]}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(f.Z,{children:"帖子管理"}),(0,i.jsx)(f.Z,{children:(0,i.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",color:"success.main"},children:[(0,i.jsx)(g.Z,{sx:{mr:1}}),"正常运行"]})}),(0,i.jsx)(f.Z,{children:"支持 Markdown 格式"})]}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(f.Z,{children:"评论系统"}),(0,i.jsx)(f.Z,{children:(0,i.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",color:"success.main"},children:[(0,i.jsx)(g.Z,{sx:{mr:1}}),"正常运行"]})}),(0,i.jsx)(f.Z,{children:"支持多级回复"})]}),(0,i.jsxs)(m.Z,{children:[(0,i.jsx)(f.Z,{children:"文件存储"}),(0,i.jsx)(f.Z,{children:(0,i.jsxs)(c.Z,{sx:{display:"flex",alignItems:"center",color:"success.main"},children:[(0,i.jsx)(g.Z,{sx:{mr:1}}),"正常运行"]})}),(0,i.jsx)(f.Z,{children:"使用 WebDAV 存储"})]})]})]})})]})})]})})}}},function(s){s.O(0,[838,526,286,799,826,774,888,179],function(){return s(s.s=64830)}),_N_E=s.O()}]);