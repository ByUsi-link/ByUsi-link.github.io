(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6214:function(e,t,r){"use strict";var i=r(4836);t.Z=void 0;var n=i(r(4938)),a=r(5893);t.Z=(0,n.default)((0,a.jsx)("path",{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6z"}),"Code")},5449:function(e,t,r){"use strict";var i=r(4836);t.Z=void 0,function(e,t){if((t||!e||!e.__esModule)&&null!==e&&("object"==typeof e||"function"==typeof e)){var r=_getRequireWildcardCache(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}i.default=e,r&&r.set(e,i)}}(r(7294));var n=i(r(4938)),a=r(5893);function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_getRequireWildcardCache=function(e){return e?r:t})(e)}t.Z=(0,n.default)((0,a.jsx)("path",{d:"M12 1.27a11 11 0 00-3.48 21.46c.55.09.73-.28.73-.55v-1.84c-3.03.64-3.67-1.46-3.67-1.46-.55-1.29-1.28-1.65-1.28-1.65-.92-.65.1-.65.1-.65 1.1 0 1.73 1.1 1.73 1.1.92 1.65 2.57 1.2 3.21.92a2 2 0 01.64-1.47c-2.47-.27-5.04-1.19-5.04-5.5 0-1.1.46-2.1 1.2-2.84a3.76 3.76 0 010-2.93s.91-.28 3.11 1.1c1.8-.49 3.7-.49 5.5 0 2.1-1.38 3.02-1.1 3.02-1.1a3.76 3.76 0 010 2.93c.83.74 1.2 1.74 1.2 2.94 0 4.21-2.57 5.13-5.04 5.4.45.37.82.92.82 2.02v3.03c0 .27.1.64.73.55A11 11 0 0012 1.27"}),"GitHub")},4938:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=r(122)},1519:function(e,t,r){"use strict";r.d(t,{Z:function(){return x}});var i=r(3366),n=r(7462),a=r(7294),o=r(512),l=r(4780),u=r(2101),s=r(948),c=r(8628),d=r(1588),h=r(4867);function getDividerUtilityClass(e){return(0,h.ZP)("MuiDivider",e)}(0,d.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var f=r(5893);let p=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],useUtilityClasses=e=>{let{absolute:t,children:r,classes:i,flexItem:n,light:a,orientation:o,textAlign:u,variant:s}=e;return(0,l.Z)({root:["root",t&&"absolute",s,a&&"light","vertical"===o&&"vertical",n&&"flexItem",r&&"withChildren",r&&"vertical"===o&&"withChildrenVertical","right"===u&&"vertical"!==o&&"textAlignRight","left"===u&&"vertical"!==o&&"textAlignLeft"],wrapper:["wrapper","vertical"===o&&"wrapperVertical"]},getDividerUtilityClass,i)},g=(0,s.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,"vertical"===r.orientation&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&"vertical"===r.orientation&&t.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>(0,n.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:(0,u.Fq)(e.palette.divider,.08)},"inset"===t.variant&&{marginLeft:72},"middle"===t.variant&&"horizontal"===t.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===t.variant&&"vertical"===t.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===t.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({ownerState:e})=>(0,n.Z)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,borderTopStyle:"solid",borderLeftStyle:"solid","&::before, &::after":{content:'""',alignSelf:"center"}}),({theme:e,ownerState:t})=>(0,n.Z)({},t.children&&"vertical"!==t.orientation&&{"&::before, &::after":{width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,borderTopStyle:"inherit"}}),({theme:e,ownerState:t})=>(0,n.Z)({},t.children&&"vertical"===t.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",borderLeft:`thin solid ${(e.vars||e).palette.divider}`,borderLeftStyle:"inherit"}}),({ownerState:e})=>(0,n.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),v=(0,s.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.wrapper,"vertical"===r.orientation&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>(0,n.Z)({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},"vertical"===t.orientation&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),m=a.forwardRef(function(e,t){let r=(0,c.i)({props:e,name:"MuiDivider"}),{absolute:a=!1,children:l,className:u,component:s=l?"div":"hr",flexItem:d=!1,light:h=!1,orientation:m="horizontal",role:x="hr"!==s?"separator":void 0,textAlign:b="center",variant:Z="fullWidth"}=r,w=(0,i.Z)(r,p),y=(0,n.Z)({},r,{absolute:a,component:s,flexItem:d,light:h,orientation:m,role:x,textAlign:b,variant:Z}),_=useUtilityClasses(y);return(0,f.jsx)(g,(0,n.Z)({as:s,className:(0,o.Z)(_.root,u),role:x,ref:t,ownerState:y},w,{children:l?(0,f.jsx)(v,{className:_.wrapper,ownerState:y,children:l}):null}))});m.muiSkipListHighlight=!0;var x=m},122:function(e,t,r){"use strict";r.r(t),r.d(t,{capitalize:function(){return n.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return o.Z},debounce:function(){return l.Z},deprecatedPropType:function(){return utils_deprecatedPropType},isMuiElement:function(){return u.Z},ownerDocument:function(){return s.Z},ownerWindow:function(){return c.Z},requirePropFactory:function(){return utils_requirePropFactory},setRef:function(){return d},unstable_ClassNameGenerator:function(){return x},unstable_useEnhancedEffect:function(){return h.Z},unstable_useId:function(){return f},unsupportedProp:function(){return utils_unsupportedProp},useControlled:function(){return p.Z},useEventCallback:function(){return g.Z},useForkRef:function(){return v.Z},useIsFocusVisible:function(){return m.Z}});var i=r(7078),n=r(8216),a=r(1476).Z,o=r(8169),l=r(7144),utils_deprecatedPropType=function(e,t){return()=>null},u=r(700),s=r(8038),c=r(5340);r(7462);var utils_requirePropFactory=function(e,t){return()=>null},d=r(7364).Z,h=r(8974),f=r(2996).Z,utils_unsupportedProp=function(e,t,r,i,n){return null},p=r(2021),g=r(2068),v=r(1705),m=r(7760);let x={configure:e=>{i.Z.configure(e)}}},6429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(4868)}])},4868:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Login}});var i=r(5893),n=r(7294),a=r(3953),o=r(5616),l=r(629),u=r(5861),s=r(5568),c=r(1701),d=r(9417),h=r(8456),f=r(1163),p=r(7955),g=r(1519),v=r(5449),m=r(6214),x=r(498);function OAuthButtons(){let{features:e}=(0,p.a)(),handleOAuthLogin=e=>{let t=(0,x.kG)(x.Pn["OAUTH_".concat(e.toUpperCase())]);window.location.href=t};return e.OAUTH&&(e.GITHUB_OAUTH||e.GITEE_OAUTH)?(0,i.jsxs)(o.Z,{sx:{mt:2},children:[(0,i.jsx)(g.Z,{sx:{my:2},children:(0,i.jsx)(u.Z,{variant:"body2",color:"text.secondary",children:"或使用第三方登录"})}),(0,i.jsxs)(o.Z,{sx:{display:"flex",gap:2,flexDirection:"column"},children:[e.GITHUB_OAUTH&&(0,i.jsx)(d.Z,{variant:"outlined",startIcon:(0,i.jsx)(v.Z,{}),onClick:()=>handleOAuthLogin("github"),fullWidth:!0,children:"使用 GitHub 登录"}),e.GITEE_OAUTH&&(0,i.jsx)(d.Z,{variant:"outlined",startIcon:(0,i.jsx)(m.Z,{}),onClick:()=>handleOAuthLogin("gitee"),fullWidth:!0,children:"使用 Gitee 登录"})]})]}):(0,i.jsx)(s.Z,{severity:"info",sx:{mt:2},children:"OAuth 登录功能暂未开启"})}var b=r(5521);function Login(){let[e,t]=(0,n.useState)({identifier:"",password:""}),[r,g]=(0,n.useState)(!1),[v,m]=(0,n.useState)(""),{login:x,features:Z}=(0,p.a)(),w=(0,f.useRouter)(),handleChange=r=>{t({...e,[r.target.name]:r.target.value}),m("")},handleSubmit=async t=>{t.preventDefault(),g(!0),m("");try{let t=await x(e.identifier,e.password);t.success?w.push("/dashboard"):m(t.message||"登录失败")}catch(e){m("网络错误，请稍后重试")}finally{g(!1)}};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(b.Z,{title:"用户登录",description:"登录您的 ByUsi 账户系统账号",keywords:"登录,用户认证,账户登录,ByUsi"}),(0,i.jsx)(a.Z,{component:"main",maxWidth:"sm",children:(0,i.jsx)(o.Z,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,i.jsxs)(l.Z,{elevation:3,sx:{p:4,width:"100%"},children:[(0,i.jsx)(u.Z,{component:"h1",variant:"h4",align:"center",gutterBottom:!0,children:"用户登录"}),v&&(0,i.jsx)(s.Z,{severity:"error",sx:{mb:2},children:v}),(0,i.jsxs)(o.Z,{component:"form",onSubmit:handleSubmit,sx:{mt:1},children:[(0,i.jsx)(c.Z,{margin:"normal",required:!0,fullWidth:!0,id:"identifier",label:"用户名或邮箱",name:"identifier",autoComplete:"username",autoFocus:!0,value:e.identifier,onChange:handleChange}),(0,i.jsx)(c.Z,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"密码",type:"password",id:"password",autoComplete:"current-password",value:e.password,onChange:handleChange}),(0,i.jsx)(d.Z,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:r,children:r?(0,i.jsx)(h.Z,{size:24}):"登录"}),(0,i.jsx)(o.Z,{sx:{textAlign:"center",mb:2},children:Z.REGISTRATION&&(0,i.jsx)(d.Z,{onClick:()=>w.push("/register"),sx:{textTransform:"none"},children:"还没有账户？立即注册"})}),(0,i.jsx)(OAuthButtons,{})]})]})})})]})}}},function(e){e.O(0,[14,89,542,774,888,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);